name: tokenizer

services:
  smart-contract-service:
    container_name: smart-contract-service
    restart: on-failure
    volumes:
      - ./code:/usr/src/app/code
      - ./front/contracts:/usr/src/app/contracts
    environment:
      SIGNER_PRIVATE_KEY: ${SIGNER_PRIVATE_KEY:?}
      FUJI_CHAIN_ID: ${FUJI_CHAIN_ID:?}
      FUJI_RPC_URL: ${FUJI_RPC_URL:?}
      ENV: "dev"
    build:
        context: ./
        dockerfile: ./deployment/Dockerfile.dev
    expose:
      - 3000
    ports:
      - 8545:8545
    networks:
      - router
  front-end-service:
    container_name: front-end-service
    restart: on-failure
    depends_on:
      - smart-contract-service
    volumes:
      - ./front/src:/usr/src/app/src
      - ./front/contracts:/usr/src/app/contracts
    environment:
      SIGNER_PRIVATE_KEY: ${SIGNER_PRIVATE_KEY:?}
      FUJI_CHAIN_ID: ${FUJI_CHAIN_ID:?}
      FUJI_RPC_URL: ${FUJI_RPC_URL:?}
      METAMASK_API_KEY: ${METAMASK_API_KEY:?}
      ENV: "dev"
      VITE_ENV: "dev"
    build:
        context: ./
        dockerfile: ./front/Dockerfile.dev
    ports:
      - "5173:5173"
    networks:
      - router

networks:
  router:
    driver: bridge